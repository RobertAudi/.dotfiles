#!/usr/bin/env zsh

git-nuke() {
  if ! in-git-repo; then
    builtin print -P -u 2 -- "[%F{196}ERROR%f] Not a repository: %B%F{yellow}${PWD}%f%b"
    return 1
  fi

  if (( $# == 0 )); then
    builtin print -P -u 2 -- "[%F{196}ERROR%f] Missing branch name"
    return 1
  fi

  # TODO: Add confirmation
  git branch -D "$1"

  # TODO: Do not hardcode the remote
  git push origin :"$1"
}

git-nuke $@
