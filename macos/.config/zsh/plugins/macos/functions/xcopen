#autoload

if is-command xcopen ; then
  command xcopen "$@"
else
  local proj=$(find . -maxdepth 1 -name "*.xcworkspace" | head -1)

  [[ -z "$proj" ]] && proj=$(find . -maxdepth 1 -name "*.xcodeproj" | head -1)

  # TODO: Support playgrounds

  if [[ -z "$proj" ]]; then
    builtin print -P -u 2 -- "[%F{196}ERROR%f] No XCode project found!"
    return 1
  fi

  open -a Xcode $proj
fi
